{"version":3,"sources":["query.js"],"names":["merge","parseUrl","qs","query","options","opts","queryparse","parse","undefined","allowPrototypes","req","_res","next","val"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,aAAlB;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA;;;;AAIA,eAAe,SAASC,KAAT,CAAeC,OAAf,EAAwB;AACnC,QAAIC,OAAOL,MAAM,EAAN,EAAUI,OAAV,CAAX;AACA,QAAIE,aAAaJ,GAAGK,KAApB;AACA,QAAI,OAAOH,OAAP,KAAmB,UAAvB,EAAmC;AAC/BE,qBAAaF,OAAb;AACAC,eAAOG,SAAP;AACH;AACD,QAAIH,SAASG,SAAT,IAAsBH,KAAKI,eAAL,KAAyBD,SAAnD,EAA8D;AAC1D;AACAH,aAAKI,eAAL,GAAuB,IAAvB;AACH;AACD,WAAO,SAASN,KAAT,CAAeO,GAAf,EAAoBC,IAApB,EAA0BC,IAA1B,EAAgC;AACnC,YAAI,CAACF,IAAIP,KAAT,EAAgB;AACZ,gBAAIU,MAAMZ,SAASS,GAAT,EAAcP,KAAxB;AACAO,gBAAIP,KAAJ,GAAYG,WAAWO,GAAX,EAAgBR,IAAhB,CAAZ;AACH;AACDO;AACH,KAND;AAOH;AACD","file":"query.js","sourcesContent":["import merge from \"utils-merge\";\r\nimport parseUrl from \"parseurl\";\r\nimport qs from \"qs\";\r\n/**\r\n * @param {Object} options\r\n * @return {Function}\r\n */\r\nexport default function query(options) {\r\n    var opts = merge({}, options);\r\n    var queryparse = qs.parse;\r\n    if (typeof options === \"function\") {\r\n        queryparse = options;\r\n        opts = undefined;\r\n    }\r\n    if (opts !== undefined && opts.allowPrototypes === undefined) {\r\n        // back-compat for qs module\r\n        opts.allowPrototypes = true;\r\n    }\r\n    return function query(req, _res, next) {\r\n        if (!req.query) {\r\n            var val = parseUrl(req).query;\r\n            req.query = queryparse(val, opts);\r\n        }\r\n        next();\r\n    };\r\n}\r\n//# sourceMappingURL=query.js.map"]}